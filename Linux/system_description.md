# Linuxのシステム強化
Linuxのシステム強化技術について、その技術とコマンドの使い方などについて記述する。

## 目次
- [GRUB](#GRUBGrand-Unified-Bootlaoder)

## GRUB(Grand Unified Bootlaoder)
Linuxのブートローダーの一つ  
ブートローダーとは、BIOS/UEFIの初期化に続いて実行されるプログラム。  

### 役割
ストレージからOSのカーネルをメインメモリに読み込み起動させること  
→ブートローダー自体の役割はOSを起動すること！



### GRUBのパスワード設定
> コマンド：grub2-mkpasswd-pbkdf2

GRUBのブート設定にアクセスするためのパスワード認証を作る  

システムが起動するまでの流れ
電源ON → UEFI/BIOS → GRUB → Linuxカーネル → ログイン画面

デバイスの起動時、無意識に上記の流れを繰り返していて、パスワード認証がないと物理的なアクセスが誰でも可能になる。

方法(Linux)
1. Shiftキー長押し
2. Escキー連打

GRUBに触れてできること  
- 起動オプションを変えられる  
GRUB画面で e を押すと、一時的に起動設定を編集できる。  
例）ログイン不要でrootシェル起動、rootパスワードのリセット、OSの修復などが可能になる
- root権限を奪える  
ログインパスワード、sudo制限があってもOS起動前の物理アクセスで全部回避可能

***⇒OS起動前の物理アクセスをさせないためにGRUBのパスワード認証も必要***

<br>

## ファイルシステムのパーティション分割と暗号化
LUKS：ディスク・ブロックデバイス(ストレージ)暗号化する技術  
Windowsのbitlockerと同じレイヤー

### 役割
ストレージの暗号化をすること  
LUKSがなかったら...?  
 ⇒ OS起動前にディスク内のバルクデータが閲覧できる。

### パーティション分割
LUKSで暗号化されているとき、ディスクレイアウトは以下のようになる
1. LUKS phdr：使用されている暗号、暗号モード、キーの長さ、マスター気のチェックサムに関する情報などが記載される

2. KM：Key Materialの略で、KM1、KM2、が存在する。KMではマスターキーが暗号化されている。KMが複数存在するのは、KM1=管理者、KM2=復旧用、KM3=一時作業用、などマスターキーの暗号パスワードをそれぞれで設定できる

3. バルクデータ：マスターキーで暗号化されたデータ  

### LUKSの主な動作
OS起動前に、マスターキーを復号するためのパスワード認証が存在する

<mark>注意</mark>：